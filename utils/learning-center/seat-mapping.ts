// 发送请求的座位号并不是我们熟知的座位号，需要通过座位号映射表进行转换
// TODO: 映射表中可能存在现实不存在的座位，需要验证

export class SeatMappingUtil {
  private static _seatMap: { [key: string]: string } = {};
  private static _isInitialized: boolean = false;

  // 座位映射表
  private static readonly _baseSeatMap: Record<string, string> = {
    // spaceName -> spaceId
    '1': '422',
    '2': '423',
    '3': '424',
    '4': '425',
    '5': '426',
    '6': '427',
    '7': '428',
    '8': '429',
    '9': '294',
    '10': '295',
    '11': '297',
    '12': '296',
    '13': '437',
    '14': '436',
    '15': '435',
    '16': '434',
    '17': '433',
    '18': '432',
    '19': '431',
    '20': '430',
    '21': '298',
    '22': '299',
    '23': '301',
    '24': '300',
    '25': '445',
    '26': '444',
    '27': '443',
    '28': '442',
    '29': '441',
    '30': '440',
    '31': '439',
    '32': '438',
    '33': '446',
    '34': '447',
    '35': '448',
    '36': '449',
    '37': '450',
    '38': '451',
    '39': '452',
    '40': '453',
    '41': '302',
    '42': '303',
    '43': '305',
    '44': '304',
    '45': '459',
    '46': '458',
    '47': '457',
    '48': '456',
    '49': '455',
    '50': '454',
    '51': '461',
    '52': '462',
    '53': '463',
    '54': '464',
    '55': '465',
    '56': '466',
    '57': '467',
    '58': '468',
    '59': '306',
    '60': '307',
    '61': '309',
    '62': '308',
    '63': '476',
    '64': '475',
    '65': '474',
    '66': '473',
    '67': '472',
    '68': '471',
    '69': '470',
    '70': '469',
    '71': '477',
    '72': '478',
    '73': '479',
    '74': '480',
    '75': '481',
    '76': '482',
    '77': '483',
    '78': '484',
    '79': '310',
    '80': '311',
    '81': '313',
    '82': '312',
    '83': '492',
    '84': '491',
    '85': '490',
    '86': '489',
    '87': '488',
    '88': '487',
    '89': '486',
    '90': '485',
    '91': '493',
    '92': '494',
    '93': '495',
    '94': '496',
    '95': '497',
    '96': '498',
    '97': '499',
    '98': '500',
    '99': '314',
    '100': '315',
    '101': '317',
    '102': '316',
    '103': '342',
    '104': '343',
    '105': '344',
    '106': '345',
    '107': '346',
    '108': '347',
    '109': '318',
    '110': '319',
    '111': '321',
    '112': '320',
    '113': '357',
    '114': '356',
    '115': '355',
    '116': '354',
    '117': '353',
    '118': '352',
    '119': '351',
    '120': '350',
    '121': '358',
    '122': '359',
    '123': '360',
    '124': '361',
    '125': '362',
    '126': '363',
    '127': '364',
    '128': '365',
    '129': '322',
    '130': '323',
    '131': '325',
    '132': '324',
    '133': '373',
    '134': '372',
    '135': '371',
    '136': '370',
    '137': '369',
    '138': '368',
    '139': '367',
    '140': '366',
    '141': '374',
    '142': '375',
    '143': '376',
    '144': '377',
    '145': '378',
    '146': '379',
    '147': '380',
    '148': '381',
    '149': '326',
    '150': '327',
    '151': '329',
    '152': '328',
    '153': '389',
    '154': '388',
    '155': '387',
    '156': '386',
    '157': '385',
    '158': '384',
    '159': '383',
    '160': '382',
    '161': '330',
    '162': '331',
    '163': '333',
    '164': '332',
    '165': '390',
    '166': '391',
    '167': '392',
    '168': '393',
    '169': '394',
    '170': '395',
    '171': '396',
    '172': '397',
    '173': '334',
    '174': '335',
    '175': '337',
    '176': '336',
    '177': '405',
    '178': '404',
    '179': '403',
    '180': '402',
    '181': '401',
    '182': '400',
    '183': '399',
    '184': '398',
    '185': '406',
    '186': '407',
    '187': '408',
    '188': '409',
    '189': '410',
    '190': '411',
    '191': '412',
    '192': '413',
    '193': '338',
    '194': '339',
    '195': '341',
    '196': '340',
    '197': '421',
    '198': '420',
    '199': '419',
    '200': '418',
    '201': '417',
    '202': '416',
    '203': '415',
    '204': '414',
    '205': '1607',
    '206': '1605',
    '207': '1603',
    '208': '1601',
    '209': '1599',
    '210': '1597',
    '211': '1595',
    '212': '1593',
    '213': '1591',
    '214': '1608',
    '215': '1606',
    '216': '1604',
    '217': '1602',
    '218': '1600',
    '219': '1598',
    '220': '1596',
    '221': '1594',
    '222': '1592',
    '223': '1619',
    '224': '1617',
    '225': '1615',
    '226': '1613',
    '227': '1611',
    '228': '1609',
    '229': '1620',
    '230': '1618',
    '231': '1616',
    '232': '1614',
    '233': '1612',
    '234': '1610',
    '235': '1625',
    '236': '1623',
    '237': '1621',
    '238': '1626',
    '239': '1624',
    '240': '1622',
    '241': '1631',
    '242': '1629',
    '243': '1627',
    '244': '1632',
    '245': '1630',
    '246': '1628',
    '247': '1637',
    '248': '1635',
    '249': '1633',
    '250': '1638',
    '251': '1636',
    '252': '1634',
    '253': '1653',
    '254': '1651',
    '255': '1649',
    '256': '1647',
    '257': '1645',
    '258': '1643',
    '259': '1641',
    '260': '1639',
    '261': '1654',
    '262': '1652',
    '263': '1650',
    '264': '1648',
    '265': '1646',
    '266': '1644',
    '267': '1642',
    '268': '1640',
    '269': '1468',
    '270': '1466',
    '271': '1464',
    '272': '1509',
    '273': '1507',
    '274': '1505',
    '275': '1503',
    '276': '1501',
    '277': '1469',
    '278': '1467',
    '279': '1465',
    '280': '1510',
    '281': '1508',
    '282': '1506',
    '283': '1504',
    '284': '1502',
    '285': '1474',
    '286': '1472',
    '287': '1470',
    '288': '1519',
    '289': '1517',
    '290': '1515',
    '291': '1513',
    '292': '1511',
    '293': '1475',
    '294': '1473',
    '295': '1471',
    '296': '1520',
    '297': '1518',
    '298': '1516',
    '299': '1514',
    '300': '1512',
    '301': '1478',
    '302': '1477',
    '303': '1476',
    '304': '1525',
    '305': '1523',
    '306': '1521',
    '307': '1479',
    '308': '1526',
    '309': '1524',
    '310': '1522',
    '311': '1480',
    '312': '1485',
    '313': '1483',
    '314': '1481',
    '315': '1535',
    '316': '1533',
    '317': '1531',
    '318': '1529',
    '319': '1527',
    '320': '1536',
    '321': '1534',
    '322': '1532',
    '323': '1530',
    '324': '1528',
    '325': '1486',
    '326': '1484',
    '327': '1482',
    '328': '1491',
    '329': '1489',
    '330': '1487',
    '331': '1541',
    '332': '1539',
    '333': '1537',
    '334': '1492',
    '335': '1490',
    '336': '1488',
    '337': '1542',
    '338': '1540',
    '339': '1538',
    '340': '1500',
    '341': '1499',
    '342': '1498',
    '343': '1497',
    '344': '1496',
    '345': '1495',
    '346': '1494',
    '347': '1493',
    '348': '1341',
    '349': '1339',
    '350': '1337',
    '351': '1342',
    '352': '1340',
    '353': '1338',
    '354': '1347',
    '355': '1345',
    '356': '1343',
    '357': '1348',
    '358': '1346',
    '359': '1344',
    '360': '1353',
    '361': '1351',
    '362': '1349',
    '363': '1354',
    '364': '1352',
    '365': '1350',
    '366': '1357',
    '367': '1356',
    '368': '1355',
    '369': '1358',
    '370': '1360',
    '371': '1362',
    '372': '1364',
    '373': '1366',
    '374': '1368',
    '375': '1369',
    '376': '1367',
    '377': '1365',
    '378': '1363',
    '379': '1361',
    '380': '1359',
    '381': '1370',
    '382': '1372',
    '383': '1374',
    '384': '1376',
    '385': '1378',
    '386': '1380',
    '387': '1381',
    '388': '1379',
    '389': '1377',
    '390': '1375',
    '391': '1373',
    '392': '1371',
    '393': '1382',
    '394': '1384',
    '395': '1386',
    '396': '1388',
    '397': '1390',
    '398': '1392',
    '399': '1393',
    '400': '1391',
    '401': '1389',
    '402': '1387',
    '403': '1385',
    '404': '1383',
    '405': '1404',
    '406': '1402',
    '407': '1400',
    '408': '1398',
    '409': '1396',
    '410': '1394',
    '411': '1405',
    '412': '1403',
    '413': '1401',
    '414': '1399',
    '415': '1397',
    '416': '1395',
    '417': '1279',
    '418': '1274',
    '419': '1280',
    '420': '1275',
    '421': '1281',
    '422': '1276',
    '423': '1282',
    '424': '1277',
    '425': '1283',
    '426': '1278',
    '427': '1284',
    '428': '1286',
    '429': '1288',
    '430': '1285',
    '431': '1287',
    '432': '1289',
    '433': '1290',
    '434': '1292',
    '435': '1294',
    '436': '1291',
    '437': '1293',
    '438': '1295',
    '439': '1296',
    '440': '1298',
    '441': '1300',
    '442': '1297',
    '443': '1299',
    '444': '1301',
    '445': '1302',
    '446': '1304',
    '447': '1306',
    '448': '1303',
    '449': '1305',
    '450': '1307',
    '451': '1308',
    '452': '1310',
    '453': '1312',
    '454': '1309',
    '455': '1311',
    '456': '1313',
    '457': '1314',
    '458': '1316',
    '459': '1318',
    '460': '1315',
    '461': '1317',
    '462': '1319',
    '463': '1320',
    '464': '1322',
    '465': '1324',
    '466': '1321',
    '467': '1323',
    '468': '1325',
    '469': '1326',
    '470': '1328',
    '471': '1330',
    '472': '1332',
    '473': '1333',
    '474': '1331',
    '475': '1329',
    '476': '1327',
    '477': '812',
    '478': '810',
    '479': '808',
    '480': '806',
    '481': '804',
    '482': '802',
    '483': '803',
    '484': '805',
    '485': '807',
    '486': '809',
    '487': '811',
    '488': '813',
    '489': '824',
    '490': '822',
    '491': '820',
    '492': '818',
    '493': '816',
    '494': '814',
    '495': '815',
    '496': '817',
    '497': '819',
    '498': '821',
    '499': '823',
    '500': '825',
    '501': '836',
    '502': '834',
    '503': '832',
    '504': '830',
    '505': '828',
    '506': '826',
    '507': '827',
    '508': '829',
    '509': '831',
    '510': '833',
    '511': '835',
    '512': '837',
    '513': '769',
    '514': '767',
    '515': '765',
    '516': '763',
    '517': '764',
    '518': '766',
    '519': '768',
    '520': '770',
    '521': '762',
    '522': '760',
    '523': '758',
    '524': '756',
    '525': '755',
    '526': '757',
    '527': '759',
    '528': '761',
    '529': '754',
    '530': '752',
    '531': '750',
    '532': '748',
    '533': '747',
    '534': '749',
    '535': '751',
    '536': '753',
    '537': '746',
    '538': '744',
    '539': '742',
    '540': '740',
    '541': '739',
    '542': '741',
    '543': '743',
    '544': '745',
    '545': '875',
    '546': '873',
    '547': '871',
    '548': '869',
    '549': '867',
    '550': '865',
    '551': '876',
    '552': '874',
    '553': '872',
    '554': '870',
    '555': '868',
    '556': '866',
    '557': '887',
    '558': '885',
    '559': '883',
    '560': '881',
    '561': '879',
    '562': '877',
    '563': '888',
    '564': '886',
    '565': '884',
    '566': '882',
    '567': '880',
    '568': '878',
    '569': '899',
    '570': '897',
    '571': '895',
    '572': '893',
    '573': '891',
    '574': '889',
    '575': '900',
    '576': '898',
    '577': '896',
    '578': '894',
    '579': '892',
    '580': '890',
    '581': '911',
    '582': '909',
    '583': '907',
    '584': '905',
    '585': '903',
    '586': '901',
    '587': '912',
    '588': '910',
    '589': '908',
    '590': '906',
    '591': '904',
    '592': '902',
    '593': '923',
    '594': '921',
    '595': '919',
    '596': '917',
    '597': '915',
    '598': '913',
    '599': '924',
    '600': '922',
    '601': '920',
    '602': '918',
    '603': '916',
    '604': '914',
    '605': '935',
    '606': '933',
    '607': '931',
    '608': '929',
    '609': '927',
    '610': '925',
    '611': '936',
    '612': '934',
    '613': '932',
    '614': '930',
    '615': '928',
    '616': '926',
    '617': '838',
    '618': '840',
    '619': '839',
    '620': '841',
    '621': '842',
    '622': '844',
    '623': '843',
    '624': '845',
    '625': '846',
    '626': '848',
    '627': '847',
    '628': '849',
    '629': '850',
    '630': '852',
    '631': '851',
    '632': '853',
    '633': '854',
    '634': '856',
    '635': '855',
    '636': '857',
    '637': '858',
    '638': '860',
    '639': '859',
    '640': '861',
    '641': '992',
    '642': '993',
    '643': '994',
    '644': '997',
    '645': '996',
    '646': '995',
    '647': '998',
    '648': '999',
    '649': '1000',
    '650': '1003',
    '651': '1002',
    '652': '1001',
    '653': '1009',
    '654': '1008',
    '655': '1007',
    '656': '1012',
    '657': '1011',
    '658': '1010',
    '659': '1015',
    '660': '1014',
    '661': '1013',
    '662': '1018',
    '663': '1017',
    '664': '1016',
    '665': '1023',
    '666': '1025',
    '667': '1027',
    '668': '1029',
    '669': '1031',
    '670': '1033',
    '671': '1035',
    '672': '1037',
    '673': '1038',
    '674': '1036',
    '675': '1034',
    '676': '1032',
    '677': '1030',
    '678': '1028',
    '679': '1026',
    '680': '1024',
    '681': '1039',
    '682': '1041',
    '683': '1043',
    '684': '1045',
    '685': '1047',
    '686': '1049',
    '687': '1051',
    '688': '1053',
    '689': '1054',
    '690': '1052',
    '691': '1050',
    '692': '1048',
    '693': '1046',
    '694': '1044',
    '695': '1042',
    '696': '1040',
    '697': '1055',
    '698': '1057',
    '699': '1059',
    '700': '1061',
    '701': '1063',
    '702': '1065',
    '703': '1067',
    '704': '1069',
    '705': '1070',
    '706': '1068',
    '707': '1066',
    '708': '1064',
    '709': '1062',
    '710': '1060',
    '711': '1058',
    '712': '1056',
    '713': '1071',
    '714': '1073',
    '715': '1075',
    '716': '1077',
    '717': '1079',
    '718': '1081',
    '719': '1083',
    '720': '1085',
    '721': '1086',
    '722': '1084',
    '723': '1082',
    '724': '1080',
    '725': '1078',
    '726': '1076',
    '727': '1074',
    '728': '1072',
    '729': '1087',
    '730': '1089',
    '731': '1090',
    '732': '1088',
    '733': '1019',
    '734': '1021',
    '735': '1022',
    '736': '1020',
    '751': '1136',
    '752': '1134',
    '753': '1137',
    '754': '1135',
    '755': '1140',
    '756': '1138',
    '757': '1141',
    '758': '1139',
    '759': '1225',
    '760': '1223',
    '761': '1221',
    '762': '1219',
    '763': '1217',
    '764': '1215',
    '765': '1213',
    '766': '1211',
    '767': '1212',
    '768': '1214',
    '769': '1216',
    '770': '1218',
    '771': '1220',
    '772': '1222',
    '773': '1224',
    '774': '1226',
    '775': '1241',
    '776': '1239',
    '777': '1237',
    '778': '1235',
    '779': '1233',
    '780': '1231',
    '781': '1229',
    '782': '1227',
    '783': '1228',
    '784': '1230',
    '785': '1232',
    '786': '1234',
    '787': '1236',
    '788': '1238',
    '789': '1240',
    '790': '1242',
    '791': '1255',
    '792': '1253',
    '793': '1251',
    '794': '1249',
    '796': '1246',
    '797': '1243',
    '798': '1244',
    '799': '1245',
    '800': '1257',
    '801': '1250',
    '802': '1252',
    '803': '1254',
    '804': '1256',
    '805': '616',
    '806': '614',
    '807': '612',
    '808': '617',
    '809': '615',
    '810': '613',
    '811': '622',
    '812': '620',
    '813': '618',
    '814': '623',
    '815': '621',
    '816': '619',
    '817': '626',
    '818': '625',
    '819': '624',
    '820': '631',
    '821': '629',
    '822': '627',
    '823': '632',
    '824': '630',
    '825': '628',
    '826': '643',
    '827': '641',
    '828': '639',
    '829': '637',
    '830': '635',
    '831': '633',
    '832': '644',
    '833': '642',
    '834': '640',
    '835': '638',
    '836': '636',
    '837': '634',
    '838': '655',
    '839': '653',
    '840': '651',
    '841': '649',
    '842': '647',
    '843': '645',
    '844': '656',
    '845': '654',
    '846': '652',
    '847': '650',
    '848': '648',
    '849': '646',
    '850': '673',
    '851': '671',
    '852': '669',
    '853': '667',
    '854': '665',
    '855': '663',
    '856': '661',
    '857': '659',
    '858': '657',
    '859': '674',
    '860': '672',
    '861': '670',
    '862': '668',
    '863': '666',
    '864': '664',
    '865': '662',
    '866': '660',
    '867': '658',
    '868': '677',
    '869': '676',
    '870': '675',
    '871': '549',
    '872': '550',
    '873': '551',
    '874': '552',
    '875': '553',
    '876': '554',
    '877': '555',
    '878': '556',
    '879': '557',
    '880': '558',
    '881': '559',
    '882': '560',
    '883': '561',
    '884': '562',
    '885': '563',
    '886': '564',
    '887': '565',
    '888': '566',
    '889': '567',
    '890': '569',
    '891': '571',
    '892': '568',
    '893': '570',
    '894': '572',
    '895': '573',
    '896': '575',
    '897': '577',
    '898': '574',
    '899': '576',
    '900': '578',
    '901': '579',
    '902': '581',
    '903': '583',
    '904': '580',
    '905': '582',
    '906': '584',
    '907': '585',
    '908': '587',
    '909': '589',
    '910': '591',
    '911': '593',
    '912': '595',
    '913': '596',
    '914': '597',
    '915': '594',
    '916': '592',
    '917': '590',
    '918': '588',
    '919': '586',
  };

  static async initialize(): Promise<void> {
    if (this._isInitialized) return;

    this._seatMap = { ...this._baseSeatMap };
    this._isInitialized = true;
  }

  static convertSeatNameToId(seatName: string): string {
    if (!this._isInitialized) {
      this._seatMap = { ...this._baseSeatMap };
      this._isInitialized = true;
    }

    const normalizedSeatName = Number.isNaN(Number(seatName)) ? seatName : Number(seatName).toString();
    return this._seatMap[normalizedSeatName] || normalizedSeatName;
  }

  static get seatMap(): Readonly<{ [key: string]: string }> {
    return Object.freeze({ ...this._seatMap });
  }
}
